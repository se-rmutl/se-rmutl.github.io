<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Module: JavaScript ES6+ & DOM Manipulation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Slate background, Amber accents, Teal for interaction) -->
    <!-- Application Structure Plan: A dashboard-style learning module with a fixed sidebar for navigation and a main content area that displays thematic sections as interactive cards. This non-linear structure allows students to freely explore topics. The user flow is: select a topic from the nav -> view interactive content cards -> engage with live code examples and simulations -> apply knowledge in the workshop section. This is more engaging than a linear slideshow and encourages self-paced learning. -->
    <!-- Visualization & Content Choices: Concepts are visualized using dynamic HTML/CSS and JS instead of static images. Goal: Explain 'Async' -> Viz: CSS animation simulation -> Interaction: 'Run' button. Goal: Explain 'Promises' -> Viz: A card that simulates states -> Interaction: 'Start' button. Goal: Teach 'DOM Manipulation' -> Viz: An interactive sandbox -> Interaction: Buttons and inputs to change live elements. This approach makes abstract concepts tangible. The final project is presented as an interactive guide with a live demo. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace;
            white-space: pre-wrap;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #475569;
            color: #e2e8f0;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            cursor: pointer;
            font-size: 0.75rem;
        }
        .copy-btn:hover {
            background-color: #64748b;
        }
        .simulation-box {
            border: 1px solid #cbd5e1;
            padding: 1rem;
            border-radius: 0.5rem;
            min-height: 100px;
        }
        .task-block {
            padding: 0.5rem;
            margin-top: 0.5rem;
            border-radius: 0.25rem;
            color: white;
            opacity: 0;
            transition: all 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Sidebar Navigation -->
        <nav id="sidebar" class="bg-slate-800 text-white w-full md:w-64 flex-shrink-0 transition-all duration-300">
            <div class="p-4">
                <h1 class="text-xl font-bold">สัปดาห์ที่ 4</h1>
                <p class="text-sm text-slate-300">JS ES6+ & DOM</p>
            </div>
            <button id="mobile-menu-button" class="md:hidden p-4 text-white focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
            <ul id="nav-links" class="mt-2 md:block">
                <li><a href="#part1" class="nav-link block p-4 bg-slate-700 hover:bg-teal-600">1. Modern JavaScript (ES6+)</a></li>
                <li><a href="#part2" class="nav-link block p-4 hover:bg-teal-600">2. Asynchronous JavaScript</a></li>
                <li><a href="#part3" class="nav-link block p-4 hover:bg-teal-600">3. DOM & Event Handling</a></li>
                <li><a href="#part4" class="nav-link block p-4 hover:bg-teal-600">4. Fetch API & JSON</a></li>
                <li><a href="#part5" class="nav-link block p-4 hover:bg-teal-600">5. Workshop & Labs</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 p-4 sm:p-6 md:p-8">
            <!-- Section 1: Modern JS -->
            <section id="part1" class="content-section active">
                <h2 class="text-3xl font-bold text-teal-700 mb-4">1. Modern JavaScript (ES6+)</h2>
                <p class="mb-6 text-slate-600">ทำความรู้จักกับฟีเจอร์ใหม่ๆ ใน JavaScript (ES6+) ที่ช่วยให้โค้ดของเราสั้น กระชับ และทรงพลังยิ่งขึ้น เป็นพื้นฐานสำคัญของการเขียนโค้ดในยุคปัจจุบัน</p>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Card: let, const vs var -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-2">`let`, `const` vs `var`</h3>
                        <p class="mb-4 text-sm text-slate-500">`let` และ `const` มาพร้อมกับ Block Scope (`{...}`) ช่วยแก้ปัญหาหลายอย่างของ `var` ที่เป็น Function Scope</p>
                        <div class="code-block">let name = "Alice";
const year = 2025;
// year = 2026; // -> TypeError!
<button class="copy-btn" onclick="copyCode(this)">คัดลอก</button></div>
                    </div>
                    <!-- Card: Arrow Functions -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-2">Arrow Functions `=>`</h3>
                        <p class="mb-4 text-sm text-slate-500">วิธีเขียนฟังก์ชันที่สั้นลงและแก้ปัญหา `this` binding ที่น่าสับสนใน callback</p>
                        <div class="code-block">// แบบเดิม
function add(a, b) { return a + b; }
// แบบใหม่ (Arrow Function)
const addArrow = (a, b) => a + b;
<button class="copy-btn" onclick="copyCode(this)">คัดลอก</button></div>
                    </div>
                    <!-- Card: Template Literals -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-2">Template Literals</h3>
                        <p class="mb-4 text-sm text-slate-500">ใช้ Backticks (`) ในการสร้างสตริง ทำให้สามารถแทรกตัวแปร `${...}` และสร้างสตริงหลายบรรทัดได้ง่ายๆ</p>
                        <div class="code-block">const name = "Bob";
const message = `สวัสดี, ${name}!
ยินดีต้อนรับสู่ปี ${2025}.`;
<button class="copy-btn" onclick="copyCode(this)">คัดลอก</button></div>
                    </div>
                    <!-- Card: Destructuring -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-2">Destructuring</h3>
                        <p class="mb-4 text-sm text-slate-500">วิธีดึงค่าจาก Object หรือ Array มาใส่ในตัวแปรได้อย่างรวดเร็วและโค้ดสะอาดตา</p>
                        <div class="code-block">const user = { id: 1, name: "Charlie" };
const { id, name } = user;
console.log(id); // 1
console.log(name); // "Charlie"
<button class="copy-btn" onclick="copyCode(this)">คัดลอก</button></div>
                    </div>
                </div>
            </section>

            <!-- Section 2: Async JS -->
            <section id="part2" class="content-section">
                <h2 class="text-3xl font-bold text-teal-700 mb-4">2. Asynchronous JavaScript</h2>
                <p class="mb-6 text-slate-600">หัวใจของการสร้างเว็บที่ไม่สะดุด คือการจัดการกับงานที่ต้องใช้เวลา เช่น การดึงข้อมูลจากอินเทอร์เน็ต มาเรียนรู้วิธีการทำงานแบบไม่รอ (Non-blocking) กัน</p>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Card: Sync vs Async Simulation -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-2">Sync vs. Async Simulation</h3>
                        <p class="mb-4 text-sm text-slate-500">คลิกเพื่อดูความแตกต่างระหว่างการทำงานแบบรอ (Sync) ที่จะทำให้ UI ค้าง และแบบไม่รอ (Async) ที่ลื่นไหล</p>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <h4 class="font-semibold text-center">Synchronous (รอคิว)</h4>
                                <div id="sync-box" class="simulation-box"></div>
                            </div>
                            <div>
                                <h4 class="font-semibold text-center">Asynchronous (ทำงานพร้อมกัน)</h4>
                                <div id="async-box" class="simulation-box"></div>
                            </div>
                        </div>
                        <button id="run-simulation-btn" class="mt-4 w-full bg-teal-600 text-white py-2 rounded-lg hover:bg-teal-700">Run Simulation</button>
                    </div>

                    <!-- Card: Promises -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-2">Promises: "คำสัญญา"</h3>
                        <p class="mb-4 text-sm text-slate-500">Promise คือ Object ที่เป็นตัวแทนของผลลัพธ์ (สำเร็จ/ล้มเหลว) ที่จะเกิดขึ้นในอนาคต ลองคลิกเพื่อจำลองการทำงาน</p>
                        <div id="promise-status" class="text-center font-bold text-lg p-4 border-2 border-dashed rounded-lg text-slate-500">Status: Idle</div>
                        <button id="start-promise-btn" class="mt-4 w-full bg-amber-500 text-white py-2 rounded-lg hover:bg-amber-600">Start Promise</button>
                    </div>

                    <!-- Card: Async/Await -->
                    <div class="bg-white p-6 rounded-lg shadow-md col-span-1 lg:col-span-2">
                        <h3 class="font-bold text-lg mb-2">Async/Await</h3>
                        <p class="mb-4 text-sm text-slate-500">วิธีเขียนโค้ด Asynchronous ให้อ่านง่ายเหมือนโค้ด Synchronous โดยใช้ `async` และ `await` ซึ่งเป็นเพียง Syntactic Sugar ของ Promises</p>
                        <div class="code-block">async function fetchData() {
  try {
    const response = await fetch('https://api.quotable.io/random');
    const data = await response.json();
    console.log(data.content);
  } catch (error) {
    console.error("ไม่สามารถดึงข้อมูลได้:", error);
  }
}
<button class="copy-btn" onclick="copyCode(this)">คัดลอก</button></div>
                    </div>
                </div>
            </section>

            <!-- Section 3: DOM -->
            <section id="part3" class="content-section">
                <h2 class="text-3xl font-bold text-teal-700 mb-4">3. DOM & Event Handling</h2>
                <p class="mb-6 text-slate-600">เรียนรู้วิธีใช้ JavaScript เพื่อเข้าถึงและเปลี่ยนแปลงเนื้อหา, โครงสร้าง, และสไตล์ของหน้าเว็บ (DOM) รวมถึงการตอบสนองต่อการกระทำของผู้ใช้ (Events)</p>
                
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="font-bold text-lg mb-2">Interactive DOM Sandbox</h3>
                    <p class="mb-4 text-sm text-slate-500">ลองเปลี่ยนแปลง Element ด้านล่างนี้ด้วยตัวเอง!</p>
                    <div class="flex flex-col md:flex-row gap-6 items-center">
                        <div class="flex-1 w-full">
                             <div class="mb-4">
                                <label for="text-input" class="block text-sm font-medium text-slate-700">ข้อความใหม่:</label>
                                <input type="text" id="text-input" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm" placeholder="ลองพิมพ์ที่นี่...">
                            </div>
                            <div class="flex flex-wrap gap-2">
                                <button id="change-text-btn" class="bg-teal-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-teal-700">เปลี่ยนข้อความ</button>
                                <button id="change-color-btn" class="bg-amber-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-amber-600">เปลี่ยนสี</button>
                                <button id="toggle-class-btn" class="bg-slate-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-slate-600">Toggle Highlight</button>
                            </div>
                        </div>
                        <div class="flex-1 w-full p-8 border-2 border-dashed rounded-lg text-center transition-all duration-300" id="sandbox-target">
                            <p class="text-xl">เป้าหมาย!</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 4: Fetch API -->
            <section id="part4" class="content-section">
                <h2 class="text-3xl font-bold text-teal-700 mb-4">4. Fetch API & JSON</h2>
                 <p class="mb-6 text-slate-600">เรียนรู้วิธีการส่ง Request เพื่อ "ดึง" ข้อมูลจากเซิร์ฟเวอร์ภายนอก (API) และทำความเข้าใจ JSON ซึ่งเป็นรูปแบบข้อมูลที่นิยมใช้กันมากที่สุดบนเว็บ</p>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="font-bold text-lg mb-2">Mini-Fetcher</h3>
                    <p class="mb-4 text-sm text-slate-500">คลิกเพื่อดึงข้อมูล To-Do list แรกจาก API ทดสอบ (JSONPlaceholder) และดูข้อมูลดิบในรูปแบบ JSON</p>
                    <button id="fetch-json-btn" class="w-full bg-teal-600 text-white py-2 rounded-lg hover:bg-teal-700 mb-4">Fetch Data</button>
                    <div id="json-output" class="code-block h-64 overflow-y-auto">ผลลัพธ์จะแสดงที่นี่...</div>
                </div>
            </section>

            <!-- Section 5: Workshop -->
            <section id="part5" class="content-section">
                <h2 class="text-3xl font-bold text-teal-700 mb-4">5. Workshop & Labs</h2>
                <p class="mb-6 text-slate-600">ถึงเวลาลงมือปฏิบัติจริง! นำความรู้ทั้งหมดที่เรียนมาใช้สร้างโปรเจกต์ "Random Quote Generator" และฝึกฝนทักษะการแก้ไขข้อผิดพลาด (Debugging)</p>
                
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="font-bold text-lg mb-2">Project: Random Quote Generator</h3>
                    <p class="mb-4 text-sm text-slate-500">สร้างเว็บแอปที่ดึงคำคมแบบสุ่มจาก API มาแสดงผล พร้อมปุ่มสำหรับสุ่มใหม่</p>
                    
                    <!-- Live Demo -->
                    <div class="border-2 border-teal-200 bg-teal-50 p-6 rounded-lg text-center">
                        <div id="quote-loading" class="hidden mb-4 text-slate-500">กำลังโหลด...</div>
                        <blockquote id="quote-display" class="text-2xl italic text-slate-700">
                            <p id="quote-content">กดปุ่มเพื่อเริ่มสุ่มคำคม</p>
                            <footer id="quote-author" class="text-right text-lg not-italic text-slate-500 mt-2"></footer>
                        </blockquote>
                        <button id="new-quote-btn" class="mt-6 bg-teal-600 text-white py-2 px-6 rounded-lg hover:bg-teal-700">New Quote</button>
                    </div>

                    <h4 class="font-semibold mt-6 mb-2">ขั้นตอนการทำ</h4>
                    <ul class="list-decimal list-inside text-slate-600 space-y-1 text-sm">
                        <li><b>HTML:</b> สร้างโครงสร้างสำหรับแสดงคำคม, ชื่อผู้พูด, และปุ่ม</li>
                        <li><b>CSS:</b> จัดหน้าตาให้สวยงาม และซ่อนสถานะ Loading ไว้ก่อน</li>
                        <li><b>JavaScript:</b>
                            <ul class="list-disc list-inside ml-4">
                                <li>เขียน `async function` เพื่อ `fetch` ข้อมูลจาก `https://api.quotable.io/random`</li>
                                <li>เพิ่ม `addEventListener` ให้กับปุ่ม</li>
                                <li>จัดการแสดง/ซ่อนสถานะ Loading</li>
                                <li>นำข้อมูลที่ได้มาใส่ใน DOM และจัดการ Error ด้วย `try...catch`</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const navLinksContainer = document.getElementById('nav-links');

            // Mobile menu toggle
            mobileMenuButton.addEventListener('click', () => {
                navLinksContainer.classList.toggle('hidden');
                navLinksContainer.classList.toggle('md:block');
            });

            function updateContent(hash) {
                if (!hash) {
                    hash = '#part1';
                }

                contentSections.forEach(section => {
                    if ('#' + section.id === hash) {
                        section.classList.add('active');
                    } else {
                        section.classList.remove('active');
                    }
                });

                navLinks.forEach(link => {
                    if (link.getAttribute('href') === hash) {
                        link.classList.add('bg-slate-700');
                    } else {
                        link.classList.remove('bg-slate-700');
                    }
                });
                
                // Close mobile menu on navigation
                if (!navLinksContainer.classList.contains('md:block')) {
                    navLinksContainer.classList.add('hidden');
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    history.pushState(null, '', targetId);
                    updateContent(targetId);
                });
            });
            
            window.addEventListener('popstate', () => {
                updateContent(window.location.hash);
            });

            // Initial load
            updateContent(window.location.hash || '#part1');

            // --- Interactive Elements Logic ---

            // Copy Code
            window.copyCode = function(button) {
                const codeBlock = button.parentElement;
                const code = codeBlock.innerText.replace('คัดลอก', '').trim();
                const textarea = document.createElement('textarea');
                textarea.value = code;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                button.innerText = 'คัดลอกแล้ว!';
                setTimeout(() => { button.innerText = 'คัดลอก'; }, 2000);
            }

            // Sync/Async Simulation
            const runSimBtn = document.getElementById('run-simulation-btn');
            const syncBox = document.getElementById('sync-box');
            const asyncBox = document.getElementById('async-box');
            runSimBtn.addEventListener('click', () => {
                syncBox.innerHTML = '';
                asyncBox.innerHTML = '';
                
                const createTask = (text, color) => {
                    const el = document.createElement('div');
                    el.textContent = text;
                    el.className = `task-block bg-${color}-500`;
                    return el;
                };

                // Sync
                setTimeout(() => { 
                    const task1 = createTask('Task 1', 'red');
                    syncBox.appendChild(task1);
                    setTimeout(() => task1.style.opacity = 1, 10);
                }, 0);
                setTimeout(() => { 
                    const task2 = createTask('Task 2', 'blue');
                    syncBox.appendChild(task2);
                    setTimeout(() => task2.style.opacity = 1, 10);
                }, 600);
                setTimeout(() => {
                    const task3 = createTask('Task 3', 'green');
                    syncBox.appendChild(task3);
                    setTimeout(() => task3.style.opacity = 1, 10);
                }, 1200);

                // Async
                setTimeout(() => { 
                    const task1 = createTask('Task 1', 'red');
                    asyncBox.appendChild(task1);
                    setTimeout(() => task1.style.opacity = 1, 10);
                }, 0);
                setTimeout(() => { 
                    const task2 = createTask('Task 2', 'blue');
                    asyncBox.appendChild(task2);
                    setTimeout(() => task2.style.opacity = 1, 10);
                }, 0);
                setTimeout(() => {
                    const task3 = createTask('Task 3', 'green');
                    asyncBox.appendChild(task3);
                    setTimeout(() => task3.style.opacity = 1, 10);
                }, 0);
            });

            // Promise Simulation
            const startPromiseBtn = document.getElementById('start-promise-btn');
            const promiseStatus = document.getElementById('promise-status');
            startPromiseBtn.addEventListener('click', () => {
                promiseStatus.textContent = 'Status: Pending...';
                promiseStatus.className = 'text-center font-bold text-lg p-4 border-2 border-dashed rounded-lg text-slate-500';
                
                const myPromise = new Promise((resolve, reject) => {
                    setTimeout(() => {
                        if (Math.random() > 0.5) {
                            resolve("สำเร็จ!");
                        } else {
                            reject("ล้มเหลว!");
                        }
                    }, 1500);
                });

                myPromise
                    .then(result => {
                        promiseStatus.textContent = `Status: Fulfilled (${result})`;
                        promiseStatus.className = 'text-center font-bold text-lg p-4 border-2 border-dashed rounded-lg text-green-600 bg-green-50 border-green-300';
                    })
                    .catch(error => {
                        promiseStatus.textContent = `Status: Rejected (${error})`;
                        promiseStatus.className = 'text-center font-bold text-lg p-4 border-2 border-dashed rounded-lg text-red-600 bg-red-50 border-red-300';
                    });
            });

            // DOM Sandbox
            const sandboxTarget = document.getElementById('sandbox-target');
            const textInput = document.getElementById('text-input');
            document.getElementById('change-text-btn').addEventListener('click', () => {
                sandboxTarget.querySelector('p').textContent = textInput.value || 'เป้าหมาย!';
            });
            document.getElementById('change-color-btn').addEventListener('click', () => {
                const colors = ['text-red-500', 'text-blue-500', 'text-green-500', 'text-purple-500'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                sandboxTarget.querySelector('p').className = `text-xl ${randomColor}`;
            });
            document.getElementById('toggle-class-btn').addEventListener('click', () => {
                sandboxTarget.classList.toggle('bg-amber-100');
                sandboxTarget.classList.toggle('scale-105');
            });

            // Fetch JSON
            const fetchJsonBtn = document.getElementById('fetch-json-btn');
            const jsonOutput = document.getElementById('json-output');
            fetchJsonBtn.addEventListener('click', async () => {
                jsonOutput.textContent = 'กำลังโหลด...';
                try {
                    const response = await fetch('https://jsonplaceholder.typicode.com/todos/1');
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const data = await response.json();
                    jsonOutput.textContent = JSON.stringify(data, null, 2);
                } catch (error) {
                    jsonOutput.textContent = `เกิดข้อผิดพลาด: ${error.message}`;
                }
            });

            // Quote Generator
            const newQuoteBtn = document.getElementById('new-quote-btn');
            const quoteContent = document.getElementById('quote-content');
            const quoteAuthor = document.getElementById('quote-author');
            const quoteLoading = document.getElementById('quote-loading');
            
            async function getNewQuote() {
                quoteContent.textContent = '';
                quoteAuthor.textContent = '';
                quoteLoading.style.display = 'block';
                try {
                    const response = await fetch('https://api.quotable.io/random');
                    if (!response.ok) throw new Error('Network response was not ok');
                    const data = await response.json();
                    quoteContent.textContent = `“${data.content}”`;
                    quoteAuthor.textContent = `— ${data.author}`;
                } catch (error) {
                    quoteContent.textContent = 'ขออภัย, ไม่สามารถดึงคำคมได้ในขณะนี้';
                    console.error('Fetch quote error:', error);
                } finally {
                    quoteLoading.style.display = 'none';
                }
            }
            newQuoteBtn.addEventListener('click', getNewQuote);
        });
    </script>
</body>
</html>
