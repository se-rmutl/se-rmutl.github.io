<!DOCTYPE html>
<html lang="th" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive SRS: MeetingRoom Lite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutrals -->
    <!-- Application Structure Plan: The application is designed as an interactive "Project Hub" dashboard, moving away from the linear document structure of the SRS. The goal is to allow different stakeholders (developers, managers, students) to quickly find the information relevant to them. The structure includes: 1. A sticky top navigation for quick jumps to key sections. 2. An "Overview" section with high-level project stats and a scope summary for quick context. 3. An interactive "Functional Requirements" section using tabs, allowing users to drill down into specific features without being overwhelmed by a long list. 4. An "Architecture" section that visually represents the system, technology stack, and database schemas (recreated with HTML/CSS) for technical users. 5. A "Plan & Testing" section that visualizes the development timeline with a Gantt-like chart and provides a clear testing checklist. This structure prioritizes usability and quick information retrieval over the original document's format. -->
    <!-- Visualization & Content Choices: 1. Project Evaluation Chart (Report Info: Evaluation Criteria -> Goal: Inform -> Viz: Donut Chart -> Interaction: Hover for details -> Justification: Provides a quick visual summary of project priorities -> Library: Chart.js). 2. System/ERD Diagrams (Report Info: Architecture/DB Diagrams -> Goal: Organize -> Viz: HTML/CSS Flexbox/Grid -> Interaction: Static Visual -> Justification: Recreates essential technical diagrams without using forbidden SVG/Mermaid, ensuring clarity for developers). 3. Development Plan (Report Info: 4-Week Plan -> Goal: Show Change/Timeline -> Viz: Horizontal Bar Chart (Gantt-like) -> Interaction: Hover for details -> Justification: Transforms a static list into an intuitive project timeline, making it easy for managers to track progress -> Library: Chart.js). 4. Requirements/DB Schemas (Report Info: FRs/SQL Schemas -> Goal: Organize/Inform -> Viz: Tabbed Interface -> Interaction: Click to switch content -> Justification: Breaks down dense technical information into manageable, on-demand chunks, improving readability and reducing cognitive load -> Library/Method: Vanilla JS + Tailwind). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Prompt', sans-serif;
            background-color: #FDFDFD;
            color: #374151;
        }
        .tab-active {
            border-color: #3B82F6;
            color: #3B82F6;
            font-weight: 600;
            background-color: #EFF6FF;
        }
        .tab-inactive {
            border-color: transparent;
            color: #6B7280;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="text-xl font-bold text-blue-600">MeetingRoom Lite</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#overview" class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">ภาพรวม</a>
                        <a href="#requirements" class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">ข้อกำหนด</a>
                        <a href="#architecture" class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">สถาปัตยกรรม</a>
                        <a href="#plan" class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">แผนงาน</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <!-- Section 1: Overview -->
        <section id="overview" class="mb-16">
            <h1 class="text-4xl font-bold text-center mb-4">Project Hub: MeetingRoom Lite</h1>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">
                นี่คือศูนย์กลางข้อมูลเชิงโต้ตอบสำหรับโครงการ "MeetingRoom Lite" ซึ่งสรุปข้อกำหนด, สถาปัตยกรรม, และแผนการพัฒนาทั้งหมดไว้ในที่เดียว เพื่อให้ทุกคนในทีมเข้าใจภาพรวมและรายละเอียดของโครงการได้อย่างง่ายดาย
            </p>

            <div class="grid md:grid-cols-3 gap-8 mb-12 text-center">
                <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100">
                    <h3 class="text-lg font-semibold text-gray-500 mb-2">ระยะเวลาโครงการ</h3>
                    <p class="text-3xl font-bold text-blue-600">1 เดือน</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100">
                    <h3 class="text-lg font-semibold text-gray-500 mb-2">กลุ่มเป้าหมาย</h3>
                    <p class="text-3xl font-bold text-blue-600">นักศึกษาปีที่ 2</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100">
                    <h3 class="text-lg font-semibold text-gray-500 mb-2">เทคโนโลยีหลัก</h3>
                    <p class="text-2xl font-bold text-blue-600">React + Node.js</p>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h2 class="text-2xl font-bold mb-4">ขอบเขตของระบบ (Scope)</h2>
                    <p class="text-gray-600 mb-6">
                        เพื่อให้โครงการสำเร็จได้ในเวลาที่กำหนด เราได้กำหนดขอบเขตของฟังก์ชันการทำงานที่ชัดเจน ดังนี้
                    </p>
                    <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100">
                        <h3 class="text-xl font-semibold mb-4 text-green-600">สิ่งที่อยู่ในขอบเขต (In Scope)</h3>
                        <ul class="space-y-3">
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">✓</span><span><b>ระบบผู้ใช้:</b> ลงทะเบียน, เข้าสู่ระบบ, ออกจากระบบ</span></li>
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">✓</span><span><b>ระบบการจอง:</b> ดูห้องว่าง, จอง, ดูการจอง, ยกเลิก</span></li>
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">✓</span><span><b>ระบบผู้ดูแล:</b> จัดการข้อมูลห้องประชุม (CRUD)</span></li>
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">✓</span><span><b>Responsive Design:</b> รองรับการใช้งานบน Desktop และ Mobile</span></li>
                        </ul>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100 mt-6">
                        <h3 class="text-xl font-semibold mb-4 text-red-600">สิ่งที่ไม่อยู่ในขอบเขต (Out of Scope)</h3>
                        <ul class="space-y-3">
                            <li class="flex items-start"><span class="text-red-500 mr-3 mt-1">✗</span><span>การแจ้งเตือนผ่านอีเมล</span></li>
                            <li class="flex items-start"><span class="text-red-500 mr-3 mt-1">✗</span><span>การเชื่อมต่อกับปฏิทินภายนอก</span></li>
                            <li class="flex items-start"><span class="text-red-500 mr-3 mt-1">✗</span><span>การจองแบบเกิดซ้ำ (Recurring Bookings)</span></li>
                            <li class="flex items-start"><span class="text-red-500 mr-3 mt-1">✗</span><span>ระบบรายงานขั้นสูง</span></li>
                        </ul>
                    </div>
                </div>
                <div>
                    <h2 class="text-2xl font-bold mb-4">เกณฑ์การประเมินโครงการ</h2>
                     <p class="text-gray-600 mb-6">
                        ภาพรวมสัดส่วนคะแนนในการประเมินผลโครงการนี้ เพื่อให้ทีมพัฒนาเข้าใจถึงความสำคัญของแต่ละส่วน
                    </p>
                    <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100">
                        <div class="chart-container h-80 md:h-96">
                            <canvas id="evaluationChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Requirements -->
        <section id="requirements" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-2">ข้อกำหนดการทำงาน (Functional Requirements)</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-10">
                ข้อกำหนดเชิงฟังก์ชันคือหัวใจของระบบ แสดงถึงสิ่งที่ผู้ใช้สามารถทำได้ เราได้แบ่งข้อกำหนดหลักออกเป็น 6 ส่วนเพื่อให้ง่ายต่อการทำความเข้าใจ คลิกที่แท็บเพื่อดูรายละเอียด
            </p>
            <div class="bg-white rounded-lg shadow-md border border-gray-100 p-2 sm:p-4">
                <div class="border-b border-gray-200">
                    <nav id="req-tabs" class="-mb-px flex flex-wrap space-x-1 sm:space-x-4" aria-label="Tabs">
                        <!-- Tabs will be generated by JS -->
                    </nav>
                </div>
                <div id="req-content" class="py-6 px-2 sm:px-4">
                    <!-- Content will be generated by JS -->
                </div>
            </div>
        </section>

        <!-- Section 3: Architecture -->
        <section id="architecture" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-2">สถาปัตยกรรมและเทคโนโลยี</h2>
             <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-10">
                ส่วนนี้จะอธิบายโครงสร้างทางเทคนิคของระบบ ตั้งแต่สถาปัตยกรรมโดยรวม, เทคโนโลยีที่เลือกใช้, ไปจนถึงการออกแบบฐานข้อมูล เพื่อให้ทีมพัฒนาเห็นภาพเดียวกัน
            </p>
            
            <div class="bg-white p-8 rounded-lg shadow-md border border-gray-100 mb-8">
                <h3 class="text-2xl font-bold mb-6 text-center">แผนภาพสถาปัตยกรรมระบบ (System Architecture)</h3>
                <div class="flex flex-col items-center space-y-4">
                    <div class="w-full max-w-md bg-blue-50 border-2 border-blue-200 text-blue-800 rounded-lg p-4 text-center shadow">
                        <h4 class="font-bold">Frontend (React.js)</h4>
                        <p class="text-sm">UI Components, State Management, API Calls</p>
                    </div>
                    <div class="text-gray-500 font-bold text-2xl">↓</div>
                    <p class="text-sm text-gray-500 -my-3">(HTTP Request/Response via JSON)</p>
                     <div class="w-full max-w-md bg-green-50 border-2 border-green-200 text-green-800 rounded-lg p-4 text-center shadow">
                        <h4 class="font-bold">Backend (Node.js + Express)</h4>
                        <p class="text-sm">API Endpoints, Business Logic, Authentication</p>
                    </div>
                    <div class="text-gray-500 font-bold text-2xl">↓</div>
                    <p class="text-sm text-gray-500 -my-3">(SQL Queries)</p>
                    <div class="w-full max-w-md bg-indigo-50 border-2 border-indigo-200 text-indigo-800 rounded-lg p-4 text-center shadow">
                        <h4 class="font-bold">Database (PostgreSQL)</h4>
                        <p class="text-sm">Data Storage, Data Integrity</p>
                    </div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-lg shadow-md border border-gray-100">
                    <h3 class="text-2xl font-bold mb-6 text-center">เทคโนโลยีที่ใช้ (Technology Stack)</h3>
                    <div class="space-y-6">
                        <div>
                            <h4 class="font-semibold text-lg mb-2">Frontend</h4>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-100 text-gray-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded">React.js</span>
                                <span class="bg-gray-100 text-gray-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded">React Router</span>
                                <span class="bg-gray-100 text-gray-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded">Axios</span>
                                <span class="bg-gray-100 text-gray-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded">Bootstrap 5 / MUI</span>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg mb-2">Backend</h4>
                             <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-100 text-gray-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded">Node.js</span>
                                <span class="bg-gray-100 text-gray-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded">Express.js</span>
                                <span class="bg-gray-100 text-gray-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded">JWT</span>
                                <span class="bg-gray-100 text-gray-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded">bcrypt</span>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg mb-2">Database</h4>
                             <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-100 text-gray-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded">PostgreSQL</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-8 rounded-lg shadow-md border border-gray-100">
                    <h3 class="text-2xl font-bold mb-6 text-center">การออกแบบฐานข้อมูล (Database Design)</h3>
                    <div class="border-b border-gray-200">
                        <nav id="db-tabs" class="-mb-px flex space-x-4" aria-label="Tabs">
                            <!-- DB Tabs will be generated by JS -->
                        </nav>
                    </div>
                    <div id="db-content" class="mt-4">
                        <!-- DB Content will be generated by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Plan -->
        <section id="plan" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-2">แผนการพัฒนาและทดสอบ</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-10">
                เพื่อให้โครงการดำเนินไปอย่างราบรื่น เราได้วางแผนการพัฒนาเป็นรายสัปดาห์ พร้อมทั้งกำหนดแนวทางการทดสอบที่ชัดเจน เพื่อประกันคุณภาพของซอฟต์แวร์
            </p>
            <div class="bg-white p-8 rounded-lg shadow-md border border-gray-100 mb-8">
                <h3 class="text-2xl font-bold mb-6 text-center">แผนการพัฒนา (4 Weeks)</h3>
                <div class="chart-container h-96">
                    <canvas id="developmentPlanChart"></canvas>
                </div>
            </div>
            <div class="bg-white p-8 rounded-lg shadow-md border border-gray-100">
                <h3 class="text-2xl font-bold mb-6 text-center">แนวทางการทดสอบ (Testing Guide)</h3>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div>
                        <h4 class="font-semibold text-lg mb-2">Authentication</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1">
                            <li>สมัครด้วยอีเมลซ้ำ</li>
                            <li>Login ด้วยรหัสผ่านผิด</li>
                            <li>เข้าถึงหน้าป้องกันโดยไม่ Login</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold text-lg mb-2">Room Booking</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1">
                            <li>จองห้องซ้ำซ้อน (Double booking)</li>
                            <li>จองเวลาในอดีต</li>
                            <li>จองนานเกินกำหนด</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold text-lg mb-2">Booking Management</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1">
                            <li>ยกเลิกการจองในอนาคต</li>
                            <li>ไม่สามารถยกเลิกการจองที่ผ่านมาแล้ว</li>
                            <li>ไม่สามารถยกเลิกก่อนเริ่ม 1 ชม.</li>
                        </ul>
                    </div>
                     <div>
                        <h4 class="font-semibold text-lg mb-2">Admin Features</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-1">
                            <li>User ทั่วไปเข้าหน้า Admin ไม่ได้</li>
                            <li>ลบห้องที่มีการจองค้างอยู่</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-white">
        <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center">
            <p>Interactive SRS for MeetingRoom Lite Project</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Data Definitions ---
            const requirementsData = [
                { id: 'fr01', title: 'FR-01: ลงทะเบียน',
                  description: 'ผู้ใช้ใหม่สามารถสร้างบัญชีเพื่อเข้าใช้งานระบบได้',
                  userStory: 'ในฐานะผู้ใช้ใหม่ ฉันต้องการสมัครสมาชิก เพื่อที่จะสามารถจองห้องประชุมได้',
                  criteria: [
                      'ต้องมีฟอร์มสำหรับกรอก ชื่อ-สกุล, อีเมล, และรหัสผ่าน',
                      'ต้องมีการตรวจสอบรูปแบบอีเมล (Email Format Validation)',
                      'รหัสผ่านต้องมีความยาวอย่างน้อย 6 ตัวอักษร',
                      'ระบบต้องไม่อนุญาตให้ใช้อีเมลที่ซ้ำกับที่มีอยู่แล้วในระบบ',
                      'เมื่อลงทะเบียนสำเร็จ ต้องแสดงข้อความแจ้งเตือนและนำทางไปยังหน้า Login'
                  ]
                },
                { id: 'fr02', title: 'FR-02: เข้าสู่ระบบ',
                  description: 'ผู้ใช้ที่ลงทะเบียนแล้วสามารถเข้าสู่ระบบด้วยอีเมลและรหัสผ่าน',
                  userStory: 'ในฐานะผู้ใช้ที่ลงทะเบียนแล้ว ฉันต้องการเข้าสู่ระบบ เพื่อที่จะเข้าถึงฟังก์ชันการจองได้',
                  criteria: [
                      'ต้องมีฟอร์มสำหรับกรอกอีเมลและรหัสผ่าน',
                      'หากข้อมูลไม่ถูกต้อง ต้องแสดงข้อความผิดพลาด',
                      'เมื่อเข้าสู่ระบบสำเร็จ ต้องได้รับ JWT Token กลับมา',
                      'Token ที่ได้รับต้องมีอายุการใช้งาน 24 ชั่วโมง',
                      'ต้องมีปุ่ม "ออกจากระบบ" (Logout) ที่ล้าง Token ออกจาก Local Storage'
                  ]
                },
                { id: 'fr03', title: 'FR-03: ดูห้องว่าง',
                  description: 'ผู้ใช้สามารถดูรายการห้องประชุมทั้งหมดและตรวจสอบสถานะความว่างตามวันและเวลาที่เลือก',
                  userStory: 'ในฐานะผู้ใช้ ฉันต้องการเห็นห้องที่ว่าง เพื่อที่จะเลือกห้องที่ต้องการจองได้',
                  criteria: [
                      'ต้องแสดงรายการห้องทั้งหมดพร้อมข้อมูลสำคัญ: ชื่อห้อง, ความจุ, และชั้น',
                      'ต้องมีตัวกรอง (Filter) สำหรับเลือกวันที่, เวลาเริ่มต้น, และเวลาสิ้นสุด',
                      'สถานะของห้องต้องแสดงอย่างชัดเจนด้วยสี (เช่น สีเขียวสำหรับ "ว่าง", สีแดงสำหรับ "ไม่ว่าง")'
                  ]
                },
                { id: 'fr04', title: 'FR-04: จองห้อง',
                  description: 'ผู้ใช้สามารถทำการจองห้องประชุมที่ว่างได้',
                  userStory: 'ในฐานะผู้ใช้ ฉันต้องการจองห้องประชุม เพื่อที่จะสำรองห้องไว้สำหรับการประชุมของฉัน',
                  criteria: [
                      'ระบบต้องป้องกันการจองห้องในช่วงเวลาที่ถูกจองไปแล้ว (Double Booking)',
                      'สามารถจองล่วงหน้าได้สูงสุด 30 วัน',
                      'ระยะเวลาการจองขั้นต่ำคือ 30 นาที และสูงสุดคือ 4 ชั่วโมง',
                      'ต้องระบุหัวข้อการประชุมทุกครั้งที่ทำการจอง'
                  ]
                },
                { id: 'fr05', title: 'FR-05: จัดการการจอง',
                  description: 'ผู้ใช้สามารถดูและยกเลิกรายการจองของตนเองได้',
                  userStory: 'ในฐานะผู้ใช้ ฉันต้องการดูรายการจองของฉัน เพื่อที่จะจัดการหรือยกเลิกมันได้',
                  criteria: [
                      'ต้องแสดงรายการจองทั้งหมดของผู้ใช้ โดยแบ่งเป็น "การจองที่จะถึง" และ "การจองที่ผ่านมา"',
                      'สามารถยกเลิกได้เฉพาะการจองที่เป็น "Upcoming" เท่านั้น',
                      'ไม่สามารถยกเลิกการจองได้หากเหลือเวลาน้อยกว่า 1 ชั่วโมงก่อนเวลาเริ่มประชุม',
                      'ต้องมีกล่องข้อความยืนยันก่อนทำการยกเลิกเสมอ'
                  ]
                },
                { id: 'fr06', title: 'FR-06: จัดการห้อง (Admin)',
                  description: 'ผู้ดูแลระบบ (Admin) สามารถจัดการข้อมูลห้องประชุมได้',
                  userStory: 'ในฐานะผู้ดูแลระบบ ฉันต้องการจัดการข้อมูลห้อง เพื่อที่จะเพิ่ม, แก้ไข, หรือลบห้องประชุมได้',
                  criteria: [
                      'ต้องมีเมนู "จัดการห้อง" ที่มองเห็นได้เฉพาะ Admin',
                      'ต้องมีฟังก์ชัน CRUD สำหรับข้อมูลห้องประชุมครบถ้วน',
                      'ระบบต้องไม่อนุญาตให้ลบห้องที่มีการจอง (สถานะ confirmed) ในอนาคตค้างอยู่'
                  ]
                }
            ];

            const dbData = [
                { id: 'users', title: 'users', schema: `CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    name VARCHAR(100) NOT NULL,
    role VARCHAR(20) DEFAULT 'user' NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE 
        DEFAULT CURRENT_TIMESTAMP
);`
                },
                { id: 'rooms', title: 'rooms', schema: `CREATE TABLE rooms (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    capacity INTEGER NOT NULL,
    floor INTEGER,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE 
        DEFAULT CURRENT_TIMESTAMP
);`
                },
                { id: 'bookings', title: 'bookings', schema: `CREATE TABLE bookings (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(id),
    room_id INTEGER NOT NULL REFERENCES rooms(id),
    booking_date DATE NOT NULL,
    start_time TIME NOT NULL,
    end_time TIME NOT NULL,
    title VARCHAR(255) NOT NULL,
    status VARCHAR(20) DEFAULT 'confirmed' NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE 
        DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT check_end_time_after_start_time 
        CHECK (end_time > start_time)
);`
                }
            ];

            // --- Tab System Implementation ---
            function setupTabs(tabsContainerId, contentContainerId, data, contentRenderer) {
                const tabsContainer = document.getElementById(tabsContainerId);
                const contentContainer = document.getElementById(contentContainerId);
                
                tabsContainer.innerHTML = data.map(item => `
                    <a href="#" data-tab="${item.id}" class="req-tab border-b-2 py-3 px-2 sm:px-4 text-sm font-medium">
                        ${item.title}
                    </a>
                `).join('');

                contentContainer.innerHTML = data.map(item => `
                    <div id="${item.id}" class="content-section">
                        ${contentRenderer(item)}
                    </div>
                `).join('');

                const tabs = tabsContainer.querySelectorAll('.req-tab');
                tabs.forEach(tab => {
                    tab.addEventListener('click', function(e) {
                        e.preventDefault();
                        const tabId = this.dataset.tab;

                        tabs.forEach(t => {
                            t.classList.remove('tab-active');
                            t.classList.add('tab-inactive');
                        });
                        this.classList.add('tab-active');
                        this.classList.remove('tab-inactive');

                        contentContainer.querySelectorAll('.content-section').forEach(content => {
                            content.classList.remove('active');
                        });
                        document.getElementById(tabId).classList.add('active');
                    });
                });

                // Activate the first tab by default
                if (tabs.length > 0) {
                    tabs[0].click();
                }
            }
            
            // --- Renderers for Tab Content ---
            const reqContentRenderer = (item) => `
                <h3 class="text-xl font-bold text-gray-800 mb-2">${item.title}</h3>
                <p class="text-gray-600 italic mb-4">"${item.userStory}"</p>
                <p class="mb-4">${item.description}</p>
                <h4 class="font-semibold mb-2">เกณฑ์การยอมรับ (Acceptance Criteria):</h4>
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                    ${item.criteria.map(c => `<li>${c}</li>`).join('')}
                </ul>
            `;

            const dbContentRenderer = (item) => `
                <div class="bg-gray-900 text-white p-4 rounded-lg overflow-x-auto">
                    <pre><code class="language-sql">${item.schema.trim()}</code></pre>
                </div>
            `;

            // --- Initialize Tabs ---
            setupTabs('req-tabs', 'req-content', requirementsData, reqContentRenderer);
            setupTabs('db-tabs', 'db-content', dbData, dbContentRenderer);

            // --- Chart.js Implementation ---
            // 1. Evaluation Chart
            const evalCtx = document.getElementById('evaluationChart').getContext('2d');
            new Chart(evalCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Functionality (40%)', 'Code Quality (30%)', 'User Interface (20%)', 'Documentation (10%)'],
                    datasets: [{
                        data: [40, 30, 20, 10],
                        backgroundColor: ['#3B82F6', '#10B981', '#F59E0B', '#6B7280'],
                        borderColor: '#FDFDFD',
                        borderWidth: 4,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    family: "'Prompt', sans-serif",
                                    size: 14
                                }
                            }
                        },
                        tooltip: {
                            bodyFont: {
                                family: "'Prompt', sans-serif"
                            },
                            titleFont: {
                                family: "'Prompt', sans-serif"
                            }
                        }
                    }
                }
            });

            // 2. Development Plan Chart
            const planCtx = document.getElementById('developmentPlanChart').getContext('2d');
            new Chart(planCtx, {
                type: 'bar',
                data: {
                    labels: [
                        'Week 1: Setup & Backend Basics', 
                        'Week 2: Backend Core & Frontend Setup', 
                        'Week 3: Frontend Features & Integration', 
                        'Week 4: Testing, Polish & Deploy'
                    ],
                    datasets: [{
                        label: 'แผนการพัฒนา',
                        data: [
                            { x: [0, 7], y: 'Week 1: Setup & Backend Basics' },
                            { x: [7, 14], y: 'Week 2: Backend Core & Frontend Setup' },
                            { x: [14, 21], y: 'Week 3: Frontend Features & Integration' },
                            { x: [21, 28], y: 'Week 4: Testing, Polish & Deploy' }
                        ],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.6)',
                            'rgba(16, 185, 129, 0.6)',
                            'rgba(245, 158, 11, 0.6)',
                            'rgba(107, 114, 128, 0.6)'
                        ],
                        borderColor: [
                            'rgba(59, 130, 246, 1)',
                            'rgba(16, 185, 129, 1)',
                            'rgba(245, 158, 11, 1)',
                            'rgba(107, 114, 128, 1)'
                        ],
                        borderWidth: 1,
                        barPercentage: 0.6,
                        borderSkipped: false,
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            min: 0,
                            max: 30,
                            title: {
                                display: true,
                                text: 'วันในโครงการ (Days)'
                            }
                        },
                        y: {
                            ticks: {
                                autoSkip: false,
                                callback: function(value, index, values) {
                                    const label = this.getLabelForValue(value);
                                    if (label.length > 30) {
                                        return label.substring(0, 30) + '...';
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.dataset.label}: Day ${context.raw.x[0]} - ${context.raw.x[1]}`;
                                }
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
