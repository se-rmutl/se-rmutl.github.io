<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENGSE206 - Week 6: Design Patterns</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0D204E; /* RMUTL Navy Blue */
            --secondary-color: #D4A237; /* RMUTL Gold */
            --accent-color: #10B981; /* Tech Green */
            --background-gradient: linear-gradient(135deg, #0D204E 0%, #1a3a8a 100%);
            --slide-bg: rgba(255, 255, 255, 0.98);
            --text-color: #333;
            --header-color: #0D204E;
            --base-font-size: clamp(16px, 1.5vw, 24px);
            --border-radius: 15px;
            --code-font: 'Fira Code', 'Courier New', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { overflow: hidden; height: 100%; }

        body {
            font-family: 'Sarabun', sans-serif;
            background: var(--background-gradient);
            color: var(--text-color);
            font-size: 16px; 
            line-height: 1.7;
        }
        
        .presentation {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2vh 3vw; 
        }

        .slide {
            background: var(--slide-bg);
            padding: 30px 40px 80px 40px;
            border-radius: var(--border-radius);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            width: 100%;
            height: 100%;
            font-size: var(--base-font-size);
            overflow-y: auto;
            display: none;
            animation: fadeIn 0.5s ease-in-out;
            position: relative;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .slide::-webkit-scrollbar { display: none; }

        .slide.active { display: block; }
        
        .title-slide.active {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: var(--background-gradient);
            color: white;
        }
        
        .title-slide h1, .title-slide h2, .title-slide h3, .title-slide p {
            color: white !important; /* Change to bright white */
        }
        .title-slide h1 { font-size: 3em; margin-bottom: 10px; border: none;}
        .title-slide h2 { font-size: 2em; margin-bottom: 20px; border: none; }
        .title-slide h3 { font-size: 1.5em; font-weight: 400; opacity: 0.9; }


        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }

        .progress-bar-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 8px;
            background-color: rgba(255, 255, 255, 0.2); z-index: 2000;
        }

        .progress-bar {
            height: 100%; width: 0%;
            background: linear-gradient(120deg, var(--secondary-color) 0%, #f1c40f 100%);
            transition: width 0.3s ease-out;
        }

        .presentation-controls {
            position: fixed; bottom: 15px; left: 50%;
            transform: translateX(-50%);
            display: flex; align-items: center; gap: 10px;
            background: rgba(13, 32, 78, 0.9);
            padding: 10px 15px;
            border-radius: 50px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(8px); z-index: 1000;
        }

        .nav-btn, .font-btn, .fullscreen-btn {
            background: transparent; color: white; border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex; align-items: center; justify-content: center;
            width: 45px; height: 45px;
            font-size: 1.5rem;
        }
        .nav-btn:hover:not(:disabled), .font-btn:hover, .fullscreen-btn:hover { 
            background: var(--secondary-color); 
            transform: translateY(-2px); 
        }
        .nav-btn:disabled { background-color: transparent; color: #777; cursor: not-allowed; transform: none;}
        
        #slide-counter { 
            color: white; 
            font-weight: 500; 
            font-size: 1.1em; 
            min-width: 70px;
            text-align: center; 
        }

        .slide-number {
            position: absolute; top: 15px; right: 20px;
            background: rgba(13, 32, 78, 0.8); color: white;
            padding: 5px 12px; border-radius: 15px; font-size: 0.8em; font-weight: 600;
        }
        
        .slide h2 { 
            font-size: 2.2em; 
            color: var(--header-color);
            border-bottom: 3px solid var(--secondary-color); 
            padding-bottom: 8px; 
            margin-top: 1em; 
            margin-bottom: 1em;
            font-weight: 700;
        }
        .slide h3 { 
            font-size: 1.6em; 
            color: var(--primary-color);
            margin-top: 1.5em; 
            font-weight: 700;
        }

        p, ul, ol { font-size: 1em; max-width: 85ch; }

        ul.checklist li::before {
             content: "✅"; color: var(--accent-color);
        }
        
        ul { list-style: none; padding-left: 0; }
        ul li {
            position: relative; padding-left: 30px; margin-bottom: 12px;
        }
        ul li::before {
            content: "▶"; color: var(--primary-color); position: absolute;
            left: 0; top: 0px; font-size: 1.1em;
        }
        
        pre {
            background: #2d3142; color: #e0e0e0; border-radius: 10px;
            padding: 20px; margin: 15px 0; font-family: var(--code-font);
            font-size: 0.85em; overflow-x: auto; line-height: 1.6;
        }
        code { font-family: var(--code-font); background-color: rgba(0,0,0,0.05); padding: 2px 5px; border-radius: 4px;}
        
        .solution { border-left: 4px solid var(--accent-color); background: #e8f8f5; padding: 15px; margin: 10px 0; border-radius: 0 8px 8px 0; }
        .anti-pattern { border-left: 4px solid #c0392b; background: #fdedec; padding: 15px; margin: 10px 0; border-radius: 0 8px 8px 0;}

        table {
            width: 100%; border-collapse: collapse; margin: 20px 0; 
            font-size: 0.8em; box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-radius: var(--border-radius);
            overflow: hidden;
        }
        table th { background: var(--header-color); color: white; padding: 12px; text-align: left; }
        table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        table tr:nth-child(even) { background: #f9f9f9; }
        table td:first-child { font-weight: bold; }

        .diagram {
            background-color: #f5f7fa;
            color: #333;
            border: 2px solid var(--primary-color);
            border-radius: var(--border-radius);
            padding: 1.5em;
            font-family: var(--code-font);
            font-size: 0.8em;
            line-height: 1.5;
            white-space: pre;
            text-align: left;
            overflow-x: auto;
        }

        .grid-2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin: 20px 0; align-items: stretch; }
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; align-items: stretch;}

        .infographic-card {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-top: 5px solid var(--primary-color);
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }
        .infographic-card .icon {
            font-size: 3.5em;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        .infographic-card h4 {
            font-size: 1.2em;
            color: var(--header-color);
            margin: 0 0 10px;
        }
        .infographic-card p {
            font-size: 0.9em;
            color: #555;
            flex-grow: 1;
        }

        .timeline {
            position: relative;
            max-width: 800px;
            margin: 30px auto;
        }
        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background-color: #e0e0e0;
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
        }
        .timeline-container {
            padding: 10px 40px;
            position: relative;
            background-color: inherit;
            width: 50%;
        }
        .timeline-container.left { left: 0; }
        .timeline-container.right { left: 50%; }
        .timeline-container::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            right: -17px;
            background-color: white;
            border: 4px solid var(--secondary-color);
            top: 15px;
            border-radius: 50%;
            z-index: 1;
        }
        .timeline-container.right::after { left: -14px; }
        .timeline-container.current::after {
            background-color: var(--secondary-color);
            border: 4px solid var(--accent-color);
        }
        .timeline-content {
            padding: 20px;
            background-color: white;
            position: relative;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-left: 5px solid var(--secondary-color);
        }
        .timeline-container.right .timeline-content {
            border-left: none;
            border-right: 5px solid var(--secondary-color);
        }
        .timeline-container.current .timeline-content {
            border-color: var(--accent-color);
            background-color: #e8f8f5;
        }
        .timeline-content h3 { font-size: 1.2em; margin-top: 0; }
        .timeline-content p { font-size: 0.9em; margin-bottom: 0; }
        
        blockquote {
            border-left: 5px solid var(--secondary-color);
            margin: 1.5em 0;
            padding: 1em 1.5em;
            background-color: #fff9e6;
            font-style: italic;
        }

    </style>
</head>
<body>

    <div class="progress-bar-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div class="presentation">
        <section class="slide title-slide active">
            <h2>ENGSE206: Software Requirements Specification and Design</h2>
            <h1>สัปดาห์ที่ 6: Design Patterns</h1>
            <h3 style="margin-top: 30px;">อ.ธนิต เกตุแก้ว</h3>
            <p style="font-size: 1.2em; opacity: 0.9;">วิศวกรรมซอฟต์แวร์, มหาวิทยาลัยเทคโนโลยีราชมงคลล้านนา (ดอยสะเก็ด)</p>
            <div class="slide-number">1/22</div>
        </section>

        <section id="slide-1" class="slide">
            <h2>🎯 วัตถุประสงค์และเป้าหมายการเรียนรู้</h2>
            <div class="grid-3">
                <div class="infographic-card">
                    <div class="icon">📚</div>
                    <h4>เข้าใจแนวคิด</h4>
                    <p>เข้าใจแนวคิด Design Patterns และประโยชน์ในการพัฒนาซอฟต์แวร์</p>
                </div>
                <div class="infographic-card" style="border-top-color: var(--secondary-color);">
                    <div class="icon">🎯</div>
                    <h4>เลือกใช้ Patterns</h4>
                    <p>เลือกใช้ Design Patterns ที่เหมาะสมกับระบบ Real-time Communication</p>
                </div>
                <div class="infographic-card" style="border-top-color: var(--accent-color);">
                    <div class="icon">📊</div>
                    <h4>ออกแบบด้วย Patterns</h4>
                    <p>สามารถออกแบบ Component Architecture สำหรับ Agent Wallboard System โดยใช้ Patterns</p>
                </div>
            </div>
            <div class="slide-number">2/22</div>
        </section>
        
        <section id="slide-2" class="slide">
            <h2>📚 ทบทวนสัปดาห์ที่แล้ว</h2>
            <h3>จากหลักการออกแบบสู่การนำไปใช้จริง</h3>
            <div class="timeline">
                <div class="timeline-container left">
                    <div class="timeline-content">
                        <h3>สัปดาห์ที่ 5: หลักการ & ภาพรวม</h3>
                        <p>เรียนรู้ SOLID, DRY, 3-Tier Architecture, และ C4 Model (C1-C2)</p>
                    </div>
                </div>
                <div class="timeline-container right current">
                    <div class="timeline-content">
                        <h3><strong>สัปดาห์นี้ (ที่ 6): Design Patterns</strong></h3>
                        <p><strong>เรียนรู้ "สูตรสำเร็จ" ในการแก้ปัญหาที่พบบ่อย และการประยุกต์ใช้กับระบบ Real-time</strong></p>
                    </div>
                </div>
                <div class="timeline-container left">
                    <div class="timeline-content">
                        <h3>ต่อไปสัปดาห์ที่ 7: Component Design</h3>
                        <p>นำ Patterns ที่เรียนวันนี้มาใช้ในการออกแบบ Component Architecture (C3)</p>
                    </div>
                </div>
            </div>
            <div class="slide-number">3/22</div>
        </section>
        
        <section id="slide-3" class="slide">
            <h2>🔍 Agent Wallboard System - ปัญหาที่ต้องแก้</h2>
            <h3>ความท้าทายหลักในการพัฒนา</h3>
            <div class="grid-2" style="grid-template-columns: 1fr 1fr;">
                <div class="infographic-card">
                    <div class="icon">🔌</div>
                    <h4>Connection Management</h4>
                    <p>จะจัดการ WebSocket connections จำนวนมาก (50-500 agents) อย่างไรไม่ให้ระบบล่ม?</p>
                </div>
                 <div class="infographic-card">
                    <div class="icon">📨</div>
                    <h4>Multiple Message Types</h4>
                    <p>จะจัดการข้อความหลายประเภท (Status Update, Chat, Alert) ที่มีโครงสร้างต่างกันได้อย่างไร?</p>
                </div>
                 <div class="infographic-card">
                    <div class="icon">⚡</div>
                    <h4>Real-time Updates</h4>
                    <p>เมื่อ Agent เปลี่ยนสถานะ จะแจ้งเตือนทุกส่วนที่เกี่ยวข้อง (เช่น Dashboard, Report) พร้อมกันทันทีได้อย่างไร?</p>
                </div>
                 <div class="infographic-card">
                    <div class="icon">🔐</div>
                    <h4>Multiple Auth Methods</h4>
                    <p>จะรองรับการ Login หลายรูปแบบ (Local, SSO) และเพิ่มรูปแบบใหม่ในอนาคตได้อย่างไร?</p>
                </div>
            </div>
             <blockquote style="text-align:center; margin-top:20px;">💡 Design Patterns จะช่วยแก้ปัญหาเหล่านี้อย่างเป็นระบบ!</blockquote>
            <div class="slide-number">4/22</div>
        </section>

        <section id="slide-4" class="slide">
            <h2>💭 Design Patterns คืออะไร?</h2>
            <h3>เปรียบเทียบง่ายๆ เหมือน "สูตรอาหาร"</h3>
            <div class="grid-2">
                <div>
                     
                    <ul>
                        <li><strong>สูตรอาหาร (Design Pattern):</strong> คือขั้นตอนการแก้ปัญหาที่ผ่านการพิสูจน์แล้ว</li>
                        <li><strong>วัตถุดิบ (Objects/Classes):</strong> คือส่วนประกอบในโค้ดของเรา</li>
                        <li><strong>อาหารจานเด็ด (Finished Software):</strong> คือโปรแกรมที่ทำงานได้ดีและมีคุณภาพ</li>
                    </ul>
                </div>
                <div>
                     <h4>🎯 ประโยชน์:</h4>
                    <ul class="checklist">
                        <li>ไม่ต้องคิดใหม่ทุกครั้ง</li>
                        <li>เป็นวิธีการที่ได้รับการพิสูจน์แล้ว</li>
                        <li>สร้างภาษากลาง ทำให้ทีมเข้าใจตรงกัน</li>
                    </ul>
                </div>
            </div>
            <div class="slide-number">5/22</div>
        </section>
        
        <section id="slide-5" class="slide">
            <h2>📊 ประเภทของ Design Patterns</h2>
            <h3>3 กลุ่มหลัก (Gang of Four)</h3>
            <div class="grid-3">
                <div class="infographic-card">
                    <div class="icon">🏭</div>
                    <h4>1. Creational Patterns</h4>
                    <p><strong>เกี่ยวกับการ "สร้าง" Object</strong><br>ช่วยให้การสร้าง Object ยืดหยุ่นและนำกลับมาใช้ใหม่ได้ง่ายขึ้น</p>
                    <p><strong>ตัวอย่าง:</strong> Singleton, Factory</p>
                </div>
                 <div class="infographic-card" style="border-top-color: var(--secondary-color);">
                    <div class="icon">🏗️</div>
                    <h4>2. Structural Patterns</h4>
                    <p><strong>เกี่ยวกับการ "จัดโครงสร้าง"</strong><br>ช่วยจัดระเบียบความสัมพันธ์ระหว่าง Class และ Object ให้ทำงานร่วมกันเป็นโครงสร้างที่ใหญ่ขึ้น</p>
                    <p><strong>ตัวอย่าง:</strong> Adapter, Facade</p>
                </div>
                 <div class="infographic-card" style="border-top-color: var(--accent-color);">
                    <div class="icon">🎭</div>
                    <h4>3. Behavioral Patterns</h4>
                    <p><strong>เกี่ยวกับการ "จัดการพฤติกรรม"</strong><br>ช่วยจัดการเรื่องการสื่อสารและความรับผิดชอบระหว่าง Object</p>
                    <p><strong>ตัวอย่าง:</strong> Observer, Strategy</p>
                </div>
            </div>
            <div class="slide-number">6/22</div>
        </section>

        <section id="slide-6" class="slide">
            <h2>🏭 Creational: Singleton Pattern</h2>
            <h3>"หนึ่งเดียวในระบบ"</h3>
             <blockquote><strong><u>หลักการ:</u></strong> รับประกันว่า Class นั้นจะมี Instance (ตัวตน) เพียงหนึ่งเดียวเท่านั้น และมีจุดเข้าถึง (Global Access Point) ไปยัง Instance นั้นได้</blockquote>
            <div class="grid-2">
                <div>
                    <h4>เปรียบเทียบ: CEO ของบริษัท</h4>
                    
                    <p>บริษัทมี CEO ได้เพียงคนเดียว ทุกแผนกต้องรายงานและรับคำสั่งจาก CEO คนเดียวกัน</p>
                </div>
                <div>
                    <h4>การประยุกต์ใช้ใน Wallboard:</h4>
                    <ul>
                        <li><strong>WebSocket Connection Manager:</strong> มีตัวจัดการการเชื่อมต่อ WebSocket เพียงตัวเดียวสำหรับทั้งระบบ เพื่อควบคุมดูแลการเชื่อมต่อทั้งหมดและประหยัดทรัพยากร</li>
                        <li><strong>Database Connection Pool:</strong> มีคลังเก็บการเชื่อมต่อฐานข้อมูลเพียงที่เดียว เพื่อให้ทุกส่วนของโปรแกรมมาหยิบใช้ร่วมกัน</li>
                    </ul>
                    <div class="solution"><strong>ข้อดี:</strong> ประหยัดทรัพยากร, จัดการง่าย</div>
                    <div class="anti-pattern"><strong>ข้อเสีย:</strong> หากพังจะกระทบทั้งระบบ, ทดสอบยาก</div>
                </div>
            </div>
            <div class="slide-number">7/22</div>
        </section>
        
        <section id="slide-7" class="slide">
            <h2>🏭 Creational: Factory Pattern</h2>
            <h3>"โรงงานผลิตสินค้า"</h3>
            <blockquote><strong><u>หลักการ:</u></strong> สร้าง Interface สำหรับการสร้าง Object แต่ปล่อยให้ Subclass เป็นผู้ตัดสินใจว่าจะสร้าง Class ไหนขึ้นมาจริงๆ</blockquote>
            <div class="grid-2">
                <div>
                     <h4>เปรียบเทียบ: ร้านพิซซ่า</h4>
                     
                     <p>ลูกค้าแค่สั่ง "พิซซ่า" ที่ต้องการ (เช่น แฮม, ไก่) แต่ไม่ต้องรู้วิธีการทำหรือส่วนผสมโดยละเอียด พ่อครัว (Factory) จะจัดการให้เอง</p>
                </div>
                <div>
                    <h4>การประยุกต์ใช้ใน Wallboard:</h4>
                     <p><strong>Message Factory:</strong> เมื่อระบบต้องการสร้างข้อความประเภทต่างๆ:</p>
                    <ul>
                        <li>สั่ง `createMessage('status')` ➔ ได้ Object ของ StatusMessage</li>
                        <li>สั่ง `createMessage('chat')` ➔ ได้ Object ของ ChatMessage</li>
                        <li>สั่ง `createMessage('alert')` ➔ ได้ Object ของ AlertMessage</li>
                    </ul>
                    <div class="solution"><strong>ข้อดี:</strong> เพิ่มประเภทใหม่ได้ง่าย, ลดความซับซ้อนของโค้ดส่วนที่เรียกใช้</div>
                </div>
            </div>
            <div class="slide-number">8/22</div>
        </section>

        <section id="slide-8" class="slide">
            <h2>🏗️ Structural: Adapter Pattern</h2>
            <h3>"ตัวแปลงให้คุยกันได้"</h3>
            <blockquote><strong><u>หลักการ:</u></strong> ทำให้ Interface ที่ไม่เข้ากันของ Class สองตัวสามารถทำงานร่วมกันได้ เปรียบเสมือนล่ามแปลภาษา</blockquote>
            <div class="grid-2">
                <div>
                    <h4>เปรียบเทียบ: ปลั๊กแปลงไฟ</h4>
                    
                    <p>เรามีอุปกรณ์ที่ใช้ปลั๊กแบบไทย แต่ต้องการไปเสียบกับเต้ารับแบบอเมริกัน เราต้องใช้ "ปลั๊กแปลง" (Adapter) เป็นตัวกลาง</p>
                </div>
                <div>
                    <h4>การประยุกต์ใช้ใน Wallboard:</h4>
                    <ul>
                        <li><strong>Database Adapter:</strong> ระบบของเราอาจจะต้องคุยกับฐานข้อมูล 2 แบบคือ MSSQL (ใช้ภาษา SQL) และ MongoDB (ใช้ NoSQL Query) เราสามารถสร้าง Adapter เพื่อให้โค้ดส่วนอื่นเรียกใช้ด้วยคำสั่งเดียวกันได้ เช่น `db.findUser()` โดย Adapter จะไปแปลงเป็นคำสั่งที่ถูกต้องให้เอง</li>
                        <li><strong>API Adapter:</strong> หากต้องเชื่อมต่อกับระบบภายนอกที่ส่งข้อมูลมาเป็น XML เราสามารถสร้าง Adapter เพื่อแปลง XML ให้เป็น JSON ที่ระบบเราเข้าใจ</li>
                    </ul>
                    <div class="solution"><strong>ข้อดี:</strong> ทำให้ระบบเก่าและใหม่ทำงานร่วมกันได้, ไม่ต้องเขียนโค้ดใหม่ทั้งหมด</div>
                </div>
            </div>
            <div class="slide-number">9/22</div>
        </section>

        <section id="slide-9" class="slide">
            <h2>🏗️ Structural: Facade Pattern</h2>
            <h3>"หน้าต่างเดียวที่ซ่อนความซับซ้อน"</h3>
            <blockquote><strong><u>หลักการ:</u></strong> สร้าง Interface ที่เรียบง่ายขึ้นมาหนึ่งอัน เพื่อเป็นหน้าต่างสำหรับติดต่อกับระบบย่อย (Subsystem) ที่มีความซับซ้อน</blockquote>
             <div class="grid-2">
                <div>
                    <h4>เปรียบเทียบ: แผนกต้อนรับธนาคาร</h4>
                    
                    <p>แทนที่เราจะต้องวิ่งไปติดต่อแผนกแคชเชียร์, แผนกสินเชื่อ, แผนก IT เอง เราแค่ไปที่ "แผนกต้อนรับ" (Facade) ที่เดียว แล้วเขาจะประสานงานส่วนที่ซับซ้อนทั้งหมดให้เรา</p>
                </div>
                <div>
                    <h4>การประยุกต์ใช้ใน Wallboard:</h4>
                     <ul>
                        <li><strong>Dashboard API Facade:</strong> หน้าจอ Dashboard ของ Supervisor ต้องการข้อมูลหลายอย่าง (สถานะ Agent, จำนวนสายรอ, ข้อความล่าสุด) ซึ่งอาจจะต้องดึงจาก Service 3-4 ตัว เราสามารถสร้าง Facade ที่มี Method เดียวชื่อ `getDashboardData()` ซึ่งเบื้องหลังจะไปรวบรวมข้อมูลทั้งหมดมาให้ ทำให้ Frontend เรียกใช้งานง่าย</li>
                    </ul>
                    <div class="solution"><strong>ข้อดี:</strong> ใช้งานง่าย, ซ่อนความซับซ้อน, ลดการพึ่งพาระหว่าง Client กับระบบภายใน</div>
                </div>
            </div>
            <div class="slide-number">10/22</div>
        </section>

        <section id="slide-10" class="slide">
            <h2>🎭 Behavioral: Observer Pattern</h2>
            <h3>"ระบบแจ้งข่าวอัตโนมัติ"</h3>
             <blockquote><strong><u>หลักการ:</u></strong> สร้างความสัมพันธ์แบบ One-to-Many ระหว่าง Object โดยเมื่อ Object หนึ่ง (Subject) มีการเปลี่ยนแปลงสถานะ Object อื่นๆ (Observers) ที่คอย "สังเกตการณ์" อยู่จะได้รับการแจ้งเตือนและอัปเดตโดยอัตโนมัติ</blockquote>
              <div class="grid-2">
                <div>
                    <h4>เปรียบเทียบ: การ Follow ในโซเชียลมีเดีย</h4>
                    
                    <p>เรา (Observer) กด Follow เพจข่าว (Subject) เมื่อเพจข่าวโพสต์อะไรใหม่ เราก็จะได้รับการแจ้งเตือน (Notification) ทันที</p>
                </div>
                <div>
                    <h4>การประยุกต์ใช้ใน Wallboard:</h4>
                    <p><strong>Agent Status Broadcasting:</strong></p>
                     <ul>
                        <li><strong>Subject:</strong> Agent ที่สถานะกำลังจะเปลี่ยน</li>
                        <li><strong>Observers:</strong> Supervisor Dashboard, Manager Report, Team Leader Screen</li>
                        <li><strong>เมื่อ Agent เปลี่ยนสถานะ:</strong> Subject จะ "แจ้งข่าว" ไปยัง Observer ทุกตัวที่ลงทะเบียนไว้ ทำให้ทุกหน้าจออัปเดตพร้อมกันแบบ Real-time</li>
                    </ul>
                    <div class="solution"><strong>ข้อดี:</strong> เป็นหัวใจของ Real-time updates, ไม่ต้องคอยถาม (Polling) ซ้ำๆ</div>
                </div>
            </div>
            <div class="slide-number">11/22</div>
        </section>

        <section id="slide-11" class="slide">
            <h2>🎭 Behavioral: Strategy Pattern</h2>
            <h3>"หลายวิธี สู่หนึ่งเป้าหมาย"</h3>
            <blockquote><strong><u>หลักการ:</u></strong> กำหนดกลุ่มของ Algorithm (วิธีแก้ปัญหา) ห่อหุ้มแต่ละอันไว้ใน Class แยกกัน และทำให้มันสามารถสลับสับเปลี่ยนกันได้ ทำให้ Algorithm สามารถเปลี่ยนแปลงได้โดยไม่กระทบกับ Client ที่เรียกใช้</blockquote>
             <div class="grid-2">
                <div>
                    <h4>เปรียบเทียบ: GPS Navigation</h4>
                    
                    <p>เป้าหมายคือการเดินทางจาก A ไป B แต่มีได้หลาย "กลยุทธ์" (Strategy) เช่น เส้นทางที่เร็วที่สุด (ทางด่วน), เส้นทางที่สั้นที่สุด, หรือเส้นทางที่ประหยัดที่สุด เราสามารถเลือกสลับไปมาได้ตามสถานการณ์</p>
                </div>
                <div>
                    <h4>การประยุกต์ใช้ใน Wallboard:</h4>
                    <p><strong>Authentication Strategies:</strong></p>
                     <ul>
                        <li><strong>เป้าหมาย:</strong> ผู้ใช้เข้าระบบได้</li>
                        <li><strong>กลยุทธ์ (Strategies):</strong>
                            <ul>
                                <li><code>LocalStrategy</code> (ใช้ Username/Password ในระบบเรา)</li>
                                <li><code>SSOStrategy</code> (ใช้ Single Sign-On จากระบบอื่น)</li>
                                <li><code>LDAPStrategy</code> (ใช้ระบบขององค์กรใหญ่)</li>
                            </ul>
                        </li>
                    </ul>
                    <div class="solution"><strong>ข้อดี:</strong> เพิ่ม/แก้ไขวิธีการ Login ได้ง่ายโดยไม่ต้องรื้อโค้ดหลัก, สอดคล้องกับ Open/Closed Principle ของ SOLID</div>
                </div>
            </div>
            <div class="slide-number">12/22</div>
        </section>

        <section id="slide-12" class="slide">
            <h2>⚡ Publisher-Subscriber Pattern</h2>
            <h3>สำหรับระบบ Real-time โดยเฉพาะ</h3>
            <blockquote>คล้ายกับ Observer แต่มีความ Decoupled มากกว่า โดยมี "ตัวกลาง" (Broker/Channel) เข้ามาคั่น ทำให้ Publisher ไม่จำเป็นต้องรู้จัก Subscriber เลย</blockquote>
            <div class="grid-2">
                 <div>
                    <h4>เปรียบเทียบ: สถานีวิทยุ</h4>
                    
                    <p><strong>สถานีวิทยุ (Publisher)</strong> แค่ส่งสัญญาณออกไป ไม่รู้ว่าใครกำลังฟังอยู่บ้าง <strong>ผู้ฟัง (Subscriber)</strong> แค่จูนคลื่นให้ตรงกับช่อง (Channel) ก็จะได้รับสัญญาณเอง</p>
                </div>
                <div>
                    <h4>การประยุกต์ใช้ใน Wallboard:</h4>
                     <p><strong>Event Broadcasting ผ่าน WebSocket:</strong></p>
                     <ul>
                        <li><strong>Publisher:</strong> Agent Status Service</li>
                        <li><strong>Channel:</strong> "agent-status-updates" WebSocket Event</li>
                        <li><strong>Subscribers:</strong> Supervisor Dashboard, Manager Reports</li>
                    </ul>
                    <p>เมื่อ Agent เปลี่ยนสถานะ, Status Service จะ publish event ไปที่ Channel และ Client ทุกคนที่ subscribe ช่องนี้อยู่ก็จะได้รับข้อมูลพร้อมกัน</p>
                </div>
            </div>
            <div class="slide-number">13/22</div>
        </section>

        <section id="slide-13" class="slide">
            <h2>🔄 Circuit Breaker Pattern</h2>
            <h3>ป้องกันระบบล่มแบบลูกโซ่</h3>
             <blockquote><strong><u>หลักการ:</u></strong> เป็น Proxy ที่คอยตรวจสอบความล้มเหลวของการเรียกใช้ Service ภายนอก หากล้มเหลวเกินเกณฑ์ที่กำหนด มันจะ "ตัดวงจร" (Open the circuit) คือหยุดส่งคำขอไปชั่วคราว และคืนค่า Error หรือค่าสำรอง (Fallback) ทันที เพื่อป้องกันไม่ให้ระบบหลักล่มตามไปด้วย</blockquote>
              <div class="grid-2">
                <div>
                    <h4>เปรียบเทียบ: เบรกเกอร์ไฟฟ้า</h4>
                    
                    <p>เมื่อเกิดไฟลัดวงจร, เบรกเกอร์จะตัดไฟทันทีเพื่อป้องกันไม่ให้เครื่องใช้ไฟฟ้าอื่นๆ เสียหายหรือเกิดไฟไหม้</p>
                </div>
                <div>
                    <h4>การประยุกต์ใช้ใน Wallboard:</h4>
                    <p><strong>Database Connection Resilience:</strong></p>
                     <ul>
                        <li><strong>ปกติ (Closed):</strong> ส่งคำขอไปที่ Database</li>
                        <li><strong>Database ล่ม (Open):</strong> Circuit Breaker ตัดการเชื่อมต่อ และอาจจะแสดงข้อมูลเก่าจาก Cache แทน</li>
                        <li><strong>ทดสอบ (Half-Open):</strong> หลังจากผ่านไปสักพัก จะลองส่งคำขอไป 1 ครั้ง ถ้าสำเร็จจะกลับสู่สถานะ Closed แต่ถ้าล้มเหลวจะกลับไป Open อีกครั้ง</li>
                    </ul>
                </div>
            </div>
            <div class="slide-number">14/22</div>
        </section>

        <section id="slide-14" class="slide">
            <h2>🎯 Pattern Selection สำหรับ Agent Wallboard</h2>
            <h3>เลือก Pattern อย่างไรให้เหมาะสม</h3>
            <table>
                <thead>
                    <tr>
                        <th>ปัญหา</th>
                        <th>Pattern ที่เหมาะสม</th>
                        <th>เหตุผล</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>จัดการ WebSocket connections</td>
                        <td><strong>Singleton</strong></td>
                        <td>ต้องการตัวจัดการเดียว ควบคุมทรัพยากร</td>
                    </tr>
                    <tr>
                        <td>สร้าง message หลายประเภท</td>
                        <td><strong>Factory</strong></td>
                        <td>แยก Logic การสร้าง Object ที่ซับซ้อน</td>
                    </tr>
                     <tr>
                        <td>เชื่อมต่อ MSSQL + MongoDB</td>
                        <td><strong>Adapter</strong></td>
                        <td>ทำให้ Interface ที่ต่างกันทำงานร่วมกันได้</td>
                    </tr>
                    <tr>
                        <td>Dashboard API ซับซ้อน</td>
                        <td><strong>Facade</strong></td>
                        <td>ซ่อนความซับซ้อน สร้าง API ที่ใช้ง่าย</td>
                    </tr>
                    <tr>
                        <td>Real-time status updates</td>
                        <td><strong>Observer / Pub-Sub</strong></td>
                        <td>กระจายการเปลี่ยนแปลงไปยังหลายส่วน</td>
                    </tr>
                    <tr>
                        <td>หลายวิธี authentication</td>
                        <td><strong>Strategy</strong></td>
                        <td>สลับสับเปลี่ยน Algorithm ได้ง่าย</td>
                    </tr>
                    <tr>
                        <td>ป้องกัน Database ล่ม</td>
                        <td><strong>Circuit Breaker</strong></td>
                        <td>เพิ่มความยืดหยุ่น (Resilience) ให้ระบบ</td>
                    </tr>
                </tbody>
            </table>
            <div class="slide-number">15/22</div>
        </section>

        <section id="slide-15" class="slide">
            <h2>📋 Implementation Strategy</h2>
            <h3>วางแผนการพัฒนาทีละขั้น</h3>
             <div class="timeline">
                <div class="timeline-container left">
                    <div class="timeline-content">
                        <h3>Phase 1: Core Infrastructure</h3>
                        <p>ใช้ <strong>Singleton</strong> (WebSocket Mgr) และ <strong>Factory</strong> (Message) เพื่อสร้างระบบพื้นฐาน</p>
                    </div>
                </div>
                <div class="timeline-container right">
                    <div class="timeline-content">
                        <h3>Phase 2: Integration Layer</h3>
                        <p>ใช้ <strong>Adapter</strong> (Database) และ <strong>Facade</strong> (API) เพื่อเชื่อมต่อระบบต่างๆ</p>
                    </div>
                </div>
                <div class="timeline-container left">
                    <div class="timeline-content">
                        <h3>Phase 3: Real-time Features</h3>
                        <p>ใช้ <strong>Observer/Pub-Sub</strong> เพื่อสร้างฟีเจอร์ Real-time updates</p>
                    </div>
                </div>
                 <div class="timeline-container right">
                    <div class="timeline-content">
                        <h3>Phase 4: Resilience & Flexibility</h3>
                        <p>ใช้ <strong>Strategy</strong> (Auth) และ <strong>Circuit Breaker</strong> (DB) เพื่อให้ระบบมั่นคงและยืดหยุ่น</p>
                    </div>
                </div>
            </div>
            <div class="slide-number">16/22</div>
        </section>

        <section id="slide-16" class="slide">
            <h2>🛠️ Workshop: Pattern Design Exercise</h2>
            <h3>กิจกรรมออกแบบ Patterns (15 นาที)</h3>
            <h4>สถานการณ์: ระบบห้องสมุดอัจฉริยะ</h4>
            <div class="grid-2">
                <div>
                    <p>คุณได้รับมอบหมายให้ออกแบบระบบห้องสมุด โดยมี Requirement ดังนี้:</p>
                     <ul>
                        <li>นักเรียนค้นหาหนังสือผ่านแอป</li>
                        <li>มีหนังสือหลายประเภท: นิยาย, วิชาการ, การ์ตูน</li>
                        <li>เมื่อมีหนังสือใหม่เข้าหมวดที่สนใจ → ต้องแจ้งเตือนนักเรียน</li>
                        <li>รองรับการค้นหาหลายวิธี: ตามชื่อ, ตามผู้แต่ง, ตามหมวด</li>
                        <li>ต้องเชื่อมต่อกับระบบ API ของห้องสมุดอื่นได้</li>
                    </ul>
                </div>
                <div>
                     <h4>คำถามสำหรับกลุ่ม:</h4>
                     <ol style="padding-left:20px;">
                        <li>ควรใช้ Design Patterns อะไรบ้างในระบบนี้?</li>
                        <li>แต่ละ Pattern ใช้แก้ปัญหาอะไร?</li>
                        <li>ลองวาดแผนภาพง่ายๆ แสดงความสัมพันธ์</li>
                    </ol>
                </div>
            </div>
            <div class="slide-number">17/22</div>
        </section>

        <section id="slide-17" class="slide">
            <h2>💡 Workshop Solution (เฉลย)</h2>
            <h3>Patterns ที่ควรใช้ในระบบห้องสมุด</h3>
            <div class="grid-2" style="grid-template-columns: 1fr 1fr;">
                <div class="infographic-card">
                    <div class="icon">🔔</div>
                    <h4>Observer Pattern</h4>
                    <p>ใช้สำหรับแจ้งเตือนนักเรียน (Subscribers) เมื่อมีหนังสือใหม่ (Subject) เข้ามาในหมวดที่สนใจ</p>
                </div>
                 <div class="infographic-card">
                    <div class="icon">🏭</div>
                    <h4>Factory Pattern</h4>
                    <p>ใช้สร้าง Object ของหนังสือแต่ละประเภท (นิยาย, วิชาการ, การ์ตูน) ซึ่งอาจมีคุณสมบัติต่างกัน</p>
                </div>
                 <div class="infographic-card">
                    <div class="icon">🗺️</div>
                    <h4>Strategy Pattern</h4>
                    <p>ใช้สำหรับสลับวิธีการค้นหา (ตามชื่อ, ผู้แต่ง, หมวด) โดยไม่กระทบโค้ดหลัก</p>
                </div>
                 <div class="infographic-card">
                    <div class="icon">🔌</div>
                    <h4>Adapter Pattern</h4>
                    <p>ใช้เป็นตัวกลางในการเชื่อมต่อกับ API ของห้องสมุดอื่น ซึ่งอาจมีรูปแบบที่แตกต่างกัน</p>
                </div>
            </div>
            <div class="slide-number">18/22</div>
        </section>

        <section id="slide-18" class="slide">
            <h2>📊 Benefits Analysis</h2>
            <h3>ประโยชน์ของการใช้ Patterns</h3>
            <div class="grid-2">
                <div>
                    <h4>📈 ในระยะยาว:</h4>
                    <ul class="checklist">
                        <li>บำรุงรักษาง่ายขึ้น</li>
                        <li>เพิ่มฟีเจอร์ใหม่ได้เร็ว</li>
                        <li>ขยายระบบ (Scale) ได้ดีกว่า</li>
                        <li>ลด Technical Debt</li>
                    </ul>
                </div>
                <div>
                    <h4>⚠️ ข้อควรระวัง:</h4>
                    <ul>
                        <li>อย่าใช้ Pattern โดยไม่มีเหตุผล (Over-engineering)</li>
                        <li>เลือกให้เหมาะกับปัญหา ไม่ใช่ใช้ตามแฟชั่น</li>
                        <li>เข้าใจ Trade-offs ของแต่ละ Pattern</li>
                    </ul>
                </div>
            </div>
            <div class="slide-number">19/22</div>
        </section>

        <section id="slide-19" class="slide">
            <h2>📋 การประเมินผล และ Assignment</h2>
            <h3>Assignment: Design Patterns Implementation Strategy</h3>
            <h4>📝 รายละเอียดงาน:</h4>
            <ol style="padding-left:20px;">
                <li><strong>วิเคราะห์ Agent Wallboard System (40%):</strong> ระบุปัญหา และเลือก Patterns ที่เหมาะสม พร้อมให้เหตุผล</li>
                <li><strong>ออกแบบ Implementation Plan (40%):</strong> วางแผนการพัฒนาเป็น Phase พร้อมลำดับความสำคัญ</li>
                <li><strong>สร้าง Pattern Relationship Diagram (20%):</strong> วาดแผนภาพแสดงความสัมพันธ์ระหว่าง Patterns ที่เลือกใช้</li>
            </ol>
            <p><strong>กำหนดส่ง:</strong> ก่อนคาบเรียนสัปดาห์หน้า</p>
            <p><strong>รูปแบบ:</strong> PDF 3-5 หน้า</p>
            <div class="slide-number">20/22</div>
        </section>

        <section id="slide-20" class="slide">
            <h2>🎬 สรุปการเรียนรู้</h2>
            <h3>Key Takeaways</h3>
            <div class="grid-2">
                <div>
                    <h4>1. Design Patterns = เครื่องมือแก้ปัญหา</h4>
                    <p>ไม่ใช่กฎตายตัว แต่เป็น "สูตรสำเร็จ" ที่ผ่านการพิสูจน์แล้ว ใช้เมื่อเจอปัญหาที่เหมาะสม</p>
                    <h4>2. 3 ประเภทหลัก:</h4>
                    <ul>
                        <li><strong>Creational:</strong> การสร้าง</li>
                        <li><strong>Structural:</strong> การจัดโครงสร้าง</li>
                        <li><strong>Behavioral:</strong> การจัดการพฤติกรรม</li>
                    </ul>
                </div>
                <div>
                    <h4>3. Patterns สำหรับ Real-time:</h4>
                    <ul>
                        <li><strong>Observer / Pub-Sub:</strong> สำหรับ Real-time updates</li>
                        <li><strong>Circuit Breaker:</strong> สำหรับความยืดหยุ่น (Resilience)</li>
                    </ul>
                    <h4>🚀 เตรียมพร้อมสำหรับสัปดาห์หน้า:</h4>
                    <p>เราจะนำ Patterns ที่เรียนในวันนี้ ไปใช้ในการออกแบบ Component Architecture กัน!</p>
                </div>
            </div>
            <div class="slide-number">21/22</div>
        </section>

        <section id="slide-21" class="slide">
            <h2>🚀 Looking Forward: The Road to Implementation</h2>
            <h3>เส้นทางการเรียนรู้ในสัปดาห์ถัดไป</h3>
            <div class="timeline">
                <div class="timeline-container left current">
                    <div class="timeline-content">
                        <h3><strong>สัปดาห์นี้ (ที่ 6): Design Patterns</strong></h3>
                        <p><strong>เราได้เรียนรู้ "สูตรสำเร็จ" และเลือกเครื่องมือที่เหมาะสมสำหรับแก้ปัญหา</strong></p>
                    </div>
                </div>
                <div class="timeline-container right">
                    <div class="timeline-content">
                        <h3>ต่อไปสัปดาห์ที่ 7: Component Design</h3>
                        <p>นำ Patterns ที่เลือกมาประยุกต์ใช้ในการออกแบบ Component Architecture (C3 Diagram) อย่างละเอียด</p>
                    </div>
                </div>
                <div class="timeline-container left">
                    <div class="timeline-content">
                        <h3>สัปดาห์ที่ 8: Detailed Design</h3>
                        <p>ลงลึกถึงระดับ Code (C4), ออกแบบ Class/Sequence Diagram และเขียน API Specification ที่พร้อมสำหรับการพัฒนา</p>
                    </div>
                </div>
            </div>
            <blockquote style="text-align:center; margin-top:20px;">เตรียมตัวให้พร้อมสำหรับการนำทฤษฎีไปสู่การปฏิบัติในสัปดาห์หน้า!</blockquote>
            <div class="slide-number">22/22</div>
        </section>
    </div>

    <div class="presentation-controls">
        <button id="prev-btn" class="nav-btn" title="สไลด์ก่อนหน้า">‹</button>
        <span id="slide-counter"></span>
        <button id="next-btn" class="nav-btn" title="สไลด์ถัดไป">›</button>
        <button id="font-decrease-btn" class="font-btn" title="ลดขนาดตัวอักษร">-</button>
        <button id="font-increase-btn" class="font-btn" title="เพิ่มขนาดตัวอักษร">+</button>
        <button id="fullscreen-btn" class="fullscreen-btn" title="เต็มจอ">⛶</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const slides = document.querySelectorAll('.slide');
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');
            const fullscreenBtn = document.getElementById('fullscreen-btn');
            const slideCounter = document.getElementById('slide-counter');
            const progressBar = document.getElementById('progress-bar');
            const fontIncreaseBtn = document.getElementById('font-increase-btn');
            const fontDecreaseBtn = document.getElementById('font-decrease-btn');
            const root = document.documentElement;

            let currentFontSize = 1.5; // Corresponds to the '1.5vw' in clamp()
            let currentSlideIndex = 0;
            const totalSlides = slides.length;

            function updateFontSize() {
                root.style.setProperty('--base-font-size', `clamp(16px, ${currentFontSize}vw, 24px)`);
            }
            
            function showSlide(index) {
                if (index < 0 || index >= totalSlides) return;

                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });

                if (slides[index].scrollTop > 0) {
                    slides[index].scrollTop = 0;
                }

                currentSlideIndex = index;
                updateControls();
            }

            function updateControls() {
                slideCounter.textContent = `${currentSlideIndex + 1} / ${totalSlides}`;
                const progressPercentage = ((currentSlideIndex + 1) / totalSlides) * 100;
                progressBar.style.width = `${progressPercentage}%`;
                prevBtn.disabled = currentSlideIndex === 0;
                nextBtn.disabled = currentSlideIndex === totalSlides - 1;
            }

            function toggleFullscreen() {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(err => {
                        alert(`ไม่สามารถเข้าสู่โหมดเต็มจอได้: ${err.message}`);
                    });
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    }
                }
            }

            fontIncreaseBtn.addEventListener('click', () => {
                if (currentFontSize < 2.5) {
                    currentFontSize += 0.1;
                    updateFontSize();
                }
            });

            fontDecreaseBtn.addEventListener('click', () => {
                if (currentFontSize > 0.8) {
                    currentFontSize -= 0.1;
                    updateFontSize();
                }
            });

            nextBtn.addEventListener('click', () => showSlide(currentSlideIndex + 1));
            prevBtn.addEventListener('click', () => showSlide(currentSlideIndex - 1));
            fullscreenBtn.addEventListener('click', toggleFullscreen);

            document.addEventListener('keydown', (event) => {
                if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') return;

                if (event.key === 'ArrowRight' || event.key === ' ') {
                    event.preventDefault();
                    nextBtn.click();
                } else if (event.key === 'ArrowLeft') {
                    event.preventDefault();
                    prevBtn.click();
                } else if (event.key === 'f') {
                    event.preventDefault();
                    toggleFullscreen();
                }
            });

            showSlide(0);
        });
    </script>
</body>
</html>

