<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENGSE207 Week 4 Lab: Microservices & Real-time Chat</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #3b82f6;       /* Blue */
            --secondary: #8b5cf6;     /* Purple */
            --accent: #10b981;        /* Green */
            --danger: #ef4444;        /* Red */
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
        }

        body {
            font-family: 'Sarabun', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            line-height: 1.6;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Typography */
        h1, h2, h3 { font-weight: 700; color: white; }
        h1 { 
            font-size: 2.5rem; 
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }
        h2 { 
            border-left: 5px solid var(--primary); 
            padding-left: 1rem; 
            margin-top: 2rem;
            margin-bottom: 1.5rem;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.2);
            border: 1px solid #334155;
        }

        /* Infographic Boxes (CSS Only) */
        .infographic-container {
            display: flex;
            gap: 1rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .info-box {
            flex: 1;
            background: rgba(255,255,255,0.05);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            border-top: 4px solid var(--accent);
            min-width: 250px;
        }

        .info-box i { font-size: 2rem; margin-bottom: 1rem; color: var(--accent); }
        .info-box strong { display: block; font-size: 1.2rem; margin-bottom: 0.5rem; }
        .info-box p { font-size: 0.9rem; color: var(--text-muted); }

        /* Flow Diagram Style */
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #000;
            padding: 2rem;
            border-radius: 12px;
            margin: 1rem 0;
            position: relative;
            overflow-x: auto;
        }
        .flow-step {
            background: var(--primary);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
            min-width: 120px;
            position: relative;
            z-index: 2;
        }
        .flow-arrow {
            flex-grow: 1;
            height: 2px;
            background: #475569;
            margin: 0 10px;
            position: relative;
        }
        .flow-arrow::after {
            content: '‚ñ∫';
            position: absolute;
            right: -5px;
            top: -10px;
            color: #475569;
            font-size: 1.2rem;
        }
        .db-icon {
            font-size: 3rem;
            color: var(--text-muted);
        }

        /* Code Blocks */
        pre {
            background: #0d1117;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            overflow-x: auto;
            border: 1px solid #30363d;
        }
        code { color: #a5d6ff; }
        .method { color: #ff7b72; font-weight: bold; }
        .url { color: #d2a8ff; }

        /* Status Badges */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.8rem;
            font-weight: bold;
            background: rgba(59, 130, 246, 0.2);
            color: var(--primary);
        }
        .score { float: right; color: var(--accent); font-weight: bold; }

    </style>
</head>
<body>

<div class="container">
    <header style="text-align: center; margin-bottom: 3rem;">
        <div class="badge">ENGSE207: Software Architecture</div>
        <h1>Week 4: Microservices Design</h1>
        <p style="color: var(--text-muted); font-size: 1.1rem;">
            Mission: ‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô Chat ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Monolith ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Real-time Scale
        </p>
    </header>

    <div class="card">
        <h2>üí° ‡πÇ‡∏à‡∏ó‡∏¢‡πå: ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏¢‡∏Å Service?</h2>
        <p>‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ Task Board ‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡πá‡∏ô Monolith (Node.js + SQLite ‡∏Å‡πâ‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß) ‡∏ã‡∏∂‡πà‡∏á‡∏î‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô CRUD ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ <br>
           ‡πÅ‡∏ï‡πà‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ <strong>"Real-time Chat"</strong> ‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏≤ WebSocket ‡πÑ‡∏õ‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ö Monolith ‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤:</p>
        
        <div class="infographic-container">
            <div class="info-box" style="border-color: var(--danger);">
                <i class="fas fa-cubes" style="color: var(--danger);"></i>
                <strong>Monolithic (‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°)</strong>
                <p>Chat ‡∏Å‡∏¥‡∏ô Resource ‡∏Ç‡∏≠‡∏á Task API <br> ‡∏ñ‡πâ‡∏≤ Chat ‡∏•‡πà‡∏° = Task Board ‡∏•‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢ <br> Scale ‡∏¢‡∏≤‡∏Å ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πâ‡∏≠‡∏ô</p>
            </div>
            <div style="display: flex; align-items: center; color: var(--text-muted); font-size: 2rem;">
                <i class="fas fa-arrow-right"></i>
            </div>
            <div class="info-box">
                <i class="fas fa-network-wired"></i>
                <strong>Microservices (‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢)</strong>
                <p>Task Service ‡∏î‡∏π‡πÅ‡∏•‡∏á‡∏≤‡∏ô‡πÄ‡∏î‡∏¥‡∏° <br> <strong>Chat Service</strong> ‡∏î‡∏π‡πÅ‡∏• Socket/Messages <br> ‡πÅ‡∏¢‡∏Å DB, ‡πÅ‡∏¢‡∏Å Scale ‡πÑ‡∏î‡πâ‡∏≠‡∏¥‡∏™‡∏£‡∏∞</p>
            </div>
        </div>
    </div>

    <div class="card">
        <h2>1. Architecture Design <span class="score">[30 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô]</span></h2>
        <p>‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏ú‡∏ô‡∏†‡∏≤‡∏û C2 (Container Diagram) ‡πÇ‡∏î‡∏¢‡πÄ‡∏ô‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ:</p>
        
        <div class="flow-diagram">
            <div style="text-align: center;">
                <i class="fas fa-laptop" style="font-size: 2rem; margin-bottom: 0.5rem;"></i><br>
                User Browser
            </div>
            
            <div class="flow-arrow"></div>

            <div class="flow-step" style="background: var(--secondary);">
                API Gateway<br>(Nginx)
            </div>

            <div class="flow-arrow"></div>

            <div style="display: flex; flex-direction: column; gap: 1rem;">
                <div class="flow-step">
                    Task Service<br>(HTTP REST)
                </div>
                <div class="flow-step" style="background: var(--accent);">
                    Chat Service<br>(WebSocket)
                </div>
            </div>

            <div class="flow-arrow"></div>

            <div style="display: flex; flex-direction: column; gap: 1rem; text-align: center;">
                <div>
                    <i class="fas fa-database db-icon"></i><br>SQL
                </div>
                <div>
                    <i class="fas fa-layer-group db-icon" style="color: var(--accent);"></i><br>NoSQL/Redis
                </div>
            </div>
        </div>

        <h3>‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≠‡∏ö‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ:</h3>
        <ul>
            <li><strong>Database Choice:</strong> ‡∏ó‡∏≥‡πÑ‡∏° Chat ‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ NoSQL (MongoDB) ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ SQL? (Hint: Structure ‡∏Ç‡∏≠‡∏á Chat Log, Write Speed)</li>
            <li><strong>Communication:</strong> Task Service ‡∏à‡∏∞‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö Chat Service ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£? (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ Task ‡πÉ‡∏´‡∏°‡πà ‡πÉ‡∏´‡πâ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô Chat)</li>
        </ul>
    </div>

    <div class="card">
        <h2>2. Event & API Design <span class="score">[40 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô]</span></h2>
        <p>‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡πÅ‡∏ö‡∏ö Real-time ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà Request/Response ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡πá‡∏ô <strong>Event-Driven</strong></p>

        <h3>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Event Flow (WebSocket):</h3>
        <div style="background: #000; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
            <p style="color: var(--accent); margin: 0;">1. User A ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "Hello Team"</p>
            <pre style="border:none; background:none; padding:0; margin: 0.5rem 0;">
CLIENT EMIT: 'send_message'
Payload: { 
  "roomId": "board_101", 
  "userId": "user_A", 
  "text": "Hello Team" 
}</pre>
            
            <hr style="border-color: #333;">
            
            <p style="color: var(--primary); margin: 0;">2. Server ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á DB -> Broadcast ‡∏´‡∏≤‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô</p>
            <pre style="border:none; background:none; padding:0; margin: 0.5rem 0;">
SERVER EMIT: 'new_message' (To: Room 'board_101')
Payload: { 
  "id": "msg_999",
  "sender": "user_A", 
  "text": "Hello Team",
  "timestamp": "10:30 AM"
}</pre>
        </div>

        <h3>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á REST API (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥):</h3>
        <pre>
<span class="method">GET</span> <span class="url">/api/v1/chats/{roomId}/messages</span>
Query Params: 
  - limit: 50
  - before_id: "msg_888" (Pagination)

<span class="method">POST</span> <span class="url">/api/v1/chats/{roomId}/attachments</span>
Body: Multipart/form-data (file)
Response: { "fileUrl": "https://s3-bucket..." }</pre>
    </div>

    <div class="card">
        <h2>3. Challenges & Solutions <span class="score">[10 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô]</span></h2>
        <div class="infographic-container">
            <div class="info-box">
                <i class="fas fa-tachometer-alt"></i>
                <strong>Scalability</strong>
                <p>‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏ô Chat ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô 10,000 ‡∏Ñ‡∏ô Server ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏£‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏´‡∏ß ‡∏à‡∏∞‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏á‡πÉ‡∏´‡πâ User ‡∏ï‡πà‡∏≤‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ? <br>(Hint: Redis Pub/Sub Adapter)</p>
            </div>
            <div class="info-box">
                <i class="fas fa-history"></i>
                <strong>Chat History</strong>
                <p>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡πà‡∏≤‡πÜ 1 ‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏ô‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡∏≠‡πà‡∏≤‡∏ô ‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô DB ‡∏´‡∏•‡∏±‡∏Å‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠? <br>(Hint: Data Archiving)</p>
            </div>
            <div class="info-box">
                <i class="fas fa-sort-numeric-down"></i>
                <strong>Message Order</strong>
                <p>‡∏ñ‡πâ‡∏≤‡πÄ‡∏ô‡πá‡∏ï‡∏ä‡πâ‡∏≤ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≤‡∏à‡πÑ‡∏õ‡∏ñ‡∏∂‡∏á‡∏Å‡πà‡∏≠‡∏ô ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏¢‡∏±‡∏á‡πÑ‡∏á‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á? <br>(Hint: Timestamp vs Sequence ID)</p>
            </div>
        </div>
    </div>

    <div class="card" style="border-left: 5px solid var(--accent);">
        <h2>üì§ ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô</h2>
        <p>‡πÉ‡∏´‡πâ‡∏£‡∏ß‡∏°‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô ZIP <code>Week4_GroupXX.zip</code> ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢:</p>
        <ol>
            <li><strong>Architecture Diagram:</strong> ‡πÑ‡∏ü‡∏•‡πå‡∏†‡∏≤‡∏û (PNG/JPG) ‡∏´‡∏£‡∏∑‡∏≠ XML ‡∏à‡∏≤‡∏Å Draw.io</li>
            <li><strong>Design Document:</strong> ‡πÑ‡∏ü‡∏•‡πå PDF ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á Tech Stack, Database, API Spec ‡πÅ‡∏•‡∏∞ Challenges</li>
        </ol>
        <p style="text-align: right; font-weight: bold; color: var(--accent);">Deadline: ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏´‡∏ô‡πâ‡∏≤</p>
    </div>

</div>

</body>
</html>